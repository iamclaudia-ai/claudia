# Claudia API Reference

This file is generated by `scripts/generate-api-reference.ts`.

## Gateway API (port 30086, `/ws`)

| Method                     | Required Params                                       | Optional Params           | Description                                                       |
| -------------------------- | ----------------------------------------------------- | ------------------------- | ----------------------------------------------------------------- |
| `extension.list`           | none                                                  | none                      | List loaded extensions and their methods                          |
| `method.list`              | none                                                  | none                      | List gateway and extension methods with schemas                   |
| `runtime.health_check`     | none                                                  | none                      | Runtime health status                                             |
| `runtime.kill_session`     | `sessionId`                                           | none                      | Kill a runtime Claude process                                     |
| `session.get`              | `sessionId`                                           | none                      | Get one session record by id                                      |
| `session.history`          | `sessionId`                                           | `limit`, `offset`         | Get history for a specific session                                |
| `session.info`             | none                                                  | none                      | Get current runtime/session info                                  |
| `session.interrupt`        | `sessionId`                                           | none                      | Interrupt a specific session                                      |
| `session.permission_mode`  | `sessionId`, `mode`                                   | none                      | Set permission mode for a session                                 |
| `session.prompt`           | `sessionId`, `content`, `model`, `thinking`, `effort` | `speakResponse`, `source` | Send prompt to explicit session with explicit runtime config      |
| `session.reset`            | `workspaceId`, `model`, `thinking`, `effort`          | `systemPrompt`            | Create a replacement session for a workspace                      |
| `session.switch`           | `sessionId`                                           | none                      | Switch runtime to an explicit session id                          |
| `session.tool_result`      | `sessionId`, `toolUseId`, `content`                   | `isError`                 | Send tool_result for interactive tools                            |
| `subscribe`                | none                                                  | `events`                  | Subscribe to events                                               |
| `unsubscribe`              | none                                                  | `events`                  | Unsubscribe from events                                           |
| `workspace.create_session` | `workspaceId`, `model`, `thinking`, `effort`          | `title`, `systemPrompt`   | Create a new session for a workspace with explicit runtime config |
| `workspace.get`            | `workspaceId`                                         | none                      | Get one workspace by id                                           |
| `workspace.get_or_create`  | `cwd`                                                 | `name`                    | Get or create a workspace for an explicit cwd                     |
| `workspace.list`           | none                                                  | none                      | List all workspaces                                               |
| `workspace.list_sessions`  | `workspaceId`                                         | none                      | List sessions for a specific workspace                            |

## Extension API (via gateway)

| Method                  | Required Params         | Optional Params   | Description                                                        |
| ----------------------- | ----------------------- | ----------------- | ------------------------------------------------------------------ |
| `control.health_check`  | none                    | none              | Return standardized health-check payload for Control extension     |
| `control.log_list`      | none                    | none              | List available log files in ~/.claudia/logs/                       |
| `control.log_tail`      | `file`                  | `lines`, `offset` | Read the last N lines of a log file                                |
| `imessage.chats`        | none                    | `limit`           | List recent iMessage chats                                         |
| `imessage.health_check` | none                    | none              | Return standardized health_check payload for iMessage extension    |
| `imessage.send`         | `text`                  | `chatId`, `to`    | Send a text message through iMessage by chatId or recipient handle |
| `imessage.status`       | none                    | none              | Return iMessage extension runtime status                           |
| `voice.health_check`    | none                    | none              | Return standardized health_check payload for Voice extension       |
| `voice.replay`          | `sessionId`, `streamId` | none              | Replay previously saved response audio by session and stream id    |
| `voice.speak`           | `text`                  | none              | Synthesize text to speech and emit a voice.audio event             |
| `voice.status`          | none                    | none              | Get current voice extension status and active stream state         |
| `voice.stop`            | none                    | none              | Stop active streaming TTS playback for the current stream          |

## Notes

- Multi-word methods use snake_case (for example `workspace.get_or_create`, `session.tool_result`).
- Source of truth is the code and schemas; regenerate after API changes.
