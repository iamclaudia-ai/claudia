# Claudia API Reference

This file is generated by `scripts/generate-api-reference.ts`.

## Gateway API (port 30086, `/ws`)

| Method                      | Required Params | Optional Params       | Description                                                           |
| --------------------------- | --------------- | --------------------- | --------------------------------------------------------------------- |
| `gateway.list_extensions`   | none            | none                  | List loaded extensions and their methods                              |
| `gateway.list_methods`      | none            | none                  | List all gateway and extension methods with schemas                   |
| `gateway.restart_extension` | `extension`     | none                  | Restart an extension host process (manual HMR for non-hot extensions) |
| `gateway.subscribe`         | none            | `events`, `exclusive` | Subscribe to events                                                   |
| `gateway.unsubscribe`       | none            | `events`              | Unsubscribe from events                                               |

## Extension API (via gateway)

| Method                            | Required Params                     | Optional Params                               | Description                                                                                                                                                                  |
| --------------------------------- | ----------------------------------- | --------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `codex.health_check`              | none                                | none                                          | Health check for Mission Control dashboard                                                                                                                                   |
| `codex.interrupt`                 | none                                | none                                          | Cancel Cody's active task                                                                                                                                                    |
| `codex.review`                    | `prompt`, `sessionId`               | `cwd`, `files`                                | Ask Cody to review code (read-only sandbox)                                                                                                                                  |
| `codex.status`                    | none                                | none                                          | Check if Cody is busy and get current task info                                                                                                                              |
| `codex.task`                      | `prompt`, `sessionId`               | `cwd`, `sandbox`, `model`, `effort`           | Delegate a general task to Cody (the Codex sub-agent)                                                                                                                        |
| `codex.test`                      | `prompt`, `sessionId`               | `cwd`                                         | Ask Cody to write or run tests (workspace-write sandbox)                                                                                                                     |
| `control.health_check`            | none                                | none                                          | Return standardized health-check payload for Control extension                                                                                                               |
| `control.log_list`                | none                                | none                                          | List available log files in ~/.claudia/logs/                                                                                                                                 |
| `control.log_tail`                | `file`                              | `lines`, `offset`                             | Read the last N lines of a log file                                                                                                                                          |
| `dominatrix.check`                | none                                | `tabId`, `ref`, `selector`                    | Check a checkbox by @ref or CSS selector                                                                                                                                     |
| `dominatrix.click`                | none                                | `tabId`, `ref`, `selector`                    | Click element by @ref or CSS selector                                                                                                                                        |
| `dominatrix.eval`                 | `expression`                        | `tabId`                                       | Evaluate JavaScript expression                                                                                                                                               |
| `dominatrix.exec`                 | `script`                            | `tabId`                                       | Execute JavaScript in page context                                                                                                                                           |
| `dominatrix.fill`                 | `value`                             | `tabId`, `ref`, `selector`                    | Fill form field by @ref or CSS selector                                                                                                                                      |
| `dominatrix.find_label`           | `label`, `perform`                  | `tabId`, `value`                              | Find element by label/aria-label and act                                                                                                                                     |
| `dominatrix.find_placeholder`     | `placeholder`, `perform`            | `tabId`, `value`                              | Find element by placeholder and act                                                                                                                                          |
| `dominatrix.find_role`            | `role`, `perform`                   | `tabId`, `name`, `value`                      | Find element by ARIA role and act                                                                                                                                            |
| `dominatrix.find_text`            | `text`, `perform`                   | `tabId`, `value`                              | Find element by visible text and act                                                                                                                                         |
| `dominatrix.get_console`          | none                                | `tabId`                                       | Get console logs from page                                                                                                                                                   |
| `dominatrix.get_cookies`          | none                                | `tabId`                                       | Get cookies for page domain                                                                                                                                                  |
| `dominatrix.get_html`             | none                                | `tabId`, `selector`                           | Get HTML of page or element                                                                                                                                                  |
| `dominatrix.get_markdown`         | none                                | `tabId`, `ref`                                | Get page or element content as Markdown                                                                                                                                      |
| `dominatrix.get_network`          | none                                | `tabId`                                       | Get network requests from page                                                                                                                                               |
| `dominatrix.get_source`           | none                                | `tabId`, `ref`, `selector`                    | Get React component ancestry and source file path for an element                                                                                                             |
| `dominatrix.get_storage`          | none                                | `tabId`                                       | Get localStorage and sessionStorage                                                                                                                                          |
| `dominatrix.get_text`             | none                                | `tabId`, `ref`                                | Get plain text of page or element by ref                                                                                                                                     |
| `dominatrix.get_title`            | none                                | `tabId`                                       | Get current page title                                                                                                                                                       |
| `dominatrix.get_url`              | none                                | `tabId`                                       | Get current page URL                                                                                                                                                         |
| `dominatrix.health_check`         | none                                | none                                          | Health check                                                                                                                                                                 |
| `dominatrix.navigate`             | `url`                               | `tabId`                                       | Navigate tab to URL                                                                                                                                                          |
| `dominatrix.register`             | `extensionId`, `instanceId`         | `profileName`                                 | Register Chrome extension client                                                                                                                                             |
| `dominatrix.response`             | `requestId`, `success`              | `data`, `error`                               | Handle command response from Chrome extension                                                                                                                                |
| `dominatrix.screenshot`           | none                                | `tabId`, `fullPage`                           | Capture visible tab as PNG data URL                                                                                                                                          |
| `dominatrix.scroll_down`          | none                                | `tabId`, `value`                              | Scroll down by pixels                                                                                                                                                        |
| `dominatrix.scroll_to`            | none                                | `tabId`, `ref`, `position`                    | Scroll to element or position                                                                                                                                                |
| `dominatrix.scroll_up`            | none                                | `tabId`, `value`                              | Scroll up by pixels                                                                                                                                                          |
| `dominatrix.select`               | `value`                             | `tabId`, `ref`, `selector`                    | Select dropdown option by @ref or CSS selector                                                                                                                               |
| `dominatrix.snapshot`             | none                                | `tabId`, `full`, `scope`, `sources`           | Get interactive element refs (default) or full a11y tree (--full)                                                                                                            |
| `dominatrix.uncheck`              | none                                | `tabId`, `ref`, `selector`                    | Uncheck a checkbox by @ref or CSS selector                                                                                                                                   |
| `dominatrix.wait`                 | `ms`                                | `tabId`                                       | Wait fixed milliseconds                                                                                                                                                      |
| `dominatrix.wait_for_element`     | `selector`                          | `tabId`, `timeout`                            | Wait for element to appear                                                                                                                                                   |
| `dominatrix.wait_for_text`        | `text`                              | `tabId`, `timeout`                            | Wait for text to appear                                                                                                                                                      |
| `dominatrix.wait_for_url`         | `pattern`                           | `tabId`, `timeout`                            | Wait for URL to match pattern                                                                                                                                                |
| `hooks.health_check`              | none                                | none                                          | Return health status of the hooks extension                                                                                                                                  |
| `hooks.list`                      | none                                | none                                          | List loaded hooks and their subscribed events                                                                                                                                |
| `imessage.chats`                  | none                                | `limit`                                       | List recent iMessage chats                                                                                                                                                   |
| `imessage.health_check`           | none                                | none                                          | Return standardized health_check payload for iMessage extension                                                                                                              |
| `imessage.send`                   | `text`                              | `chatId`, `to`                                | Send a text message through iMessage by chatId or recipient handle                                                                                                           |
| `imessage.status`                 | none                                | none                                          | Return iMessage extension runtime status                                                                                                                                     |
| `memory.conversations`            | none                                | `status`, `limit`                             | List conversations with optional status filter                                                                                                                               |
| `memory.health_check`             | none                                | none                                          | Return memory system stats: file count, entry count, conversation breakdown                                                                                                  |
| `memory.ingest`                   | none                                | `file`, `dir`, `reimport`                     | Manually ingest JSONL file(s) into the memory database. Paths are relative to the watch directory unless absolute.                                                           |
| `memory.process`                  | none                                | `batchSize`                                   | Queue ready conversations for Libby to process into structured memories in ~/memory/. Worker processes them one at a time in the background.                                 |
| `memory.process_conversation`     | `id`                                | `dryRun`                                      | Process a specific conversation by ID through Libby. Temporarily marks it as ready if needed.                                                                                |
| `session.close_session`           | `sessionId`                         | none                                          | Close a session (kills CLI process via query.close())                                                                                                                        |
| `session.create_session`          | `cwd`                               | `model`, `systemPrompt`, `thinking`, `effort` | Create a new Claude session for a workspace CWD                                                                                                                              |
| `session.get_history`             | `sessionId`                         | `cwd`, `limit`, `offset`                      | Get session history from JSONL                                                                                                                                               |
| `session.get_info`                | none                                | `sessionId`                                   | Get current session and extension info                                                                                                                                       |
| `session.get_or_create_workspace` | `cwd`                               | `name`                                        | Get or create workspace for CWD                                                                                                                                              |
| `session.get_workspace`           | `id`                                | none                                          | Get workspace by ID                                                                                                                                                          |
| `session.health_check`            | none                                | none                                          | Health status of session extension                                                                                                                                           |
| `session.interrupt_session`       | `sessionId`                         | none                                          | Interrupt current response                                                                                                                                                   |
| `session.list_sessions`           | `cwd`                               | none                                          | List sessions for a workspace (reads sessions-index.json)                                                                                                                    |
| `session.list_workspaces`         | none                                | none                                          | List all workspaces                                                                                                                                                          |
| `session.reset_session`           | `cwd`                               | `model`                                       | Create a replacement session for workspace                                                                                                                                   |
| `session.send_notification`       | `sessionId`, `text`                 | none                                          | Inject a notification into a session as a user message wrapped in <user_notification> tags. Used by extensions (e.g. codex) to notify the session when async work completes. |
| `session.send_prompt`             | `sessionId`, `content`              | `cwd`, `streaming`, `source`                  | Send a prompt to a session (streaming or await completion)                                                                                                                   |
| `session.send_tool_result`        | `sessionId`, `toolUseId`, `content` | `isError`                                     | Send tool result for interactive tools                                                                                                                                       |
| `session.set_permission_mode`     | `sessionId`, `mode`                 | none                                          | Set CLI permission mode                                                                                                                                                      |
| `session.switch_session`          | `sessionId`, `cwd`                  | `model`                                       | Switch active session for a workspace                                                                                                                                        |
| `voice.health_check`              | none                                | none                                          | Return standardized health_check payload for Voice extension                                                                                                                 |
| `voice.replay`                    | `sessionId`, `streamId`             | none                                          | Replay previously saved response audio by session and stream id                                                                                                              |
| `voice.speak`                     | `text`                              | none                                          | Synthesize text to speech and emit a voice.audio event                                                                                                                       |
| `voice.status`                    | none                                | none                                          | Get current voice extension status and active stream state                                                                                                                   |
| `voice.stop`                      | none                                | none                                          | Stop active streaming TTS playback for the current stream                                                                                                                    |

## Notes

- Multi-word methods use snake_case (for example `session.get_or_create_workspace`, `session.send_tool_result`).
- Source of truth is the code and schemas; regenerate after API changes.
